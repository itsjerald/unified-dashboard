<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Change Password</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container card">
    <h2>Change Password</h2>
    <input type="password" id="old" placeholder="Old password"><br>
    <input type="password" id="new" placeholder="New password"><br>
    <button onclick="changePassword()">Change</button>
  </div>

  <script>
  async function changePassword() {
    const old_password = document.getElementById("old").value;
    const new_password = document.getElementById("new").value;
    const res = await fetch("/auth/change-password", {
      method:"POST", credentials:"include",
      headers:{"Content-Type":"application/json"},
      body:JSON.stringify({old_password,new_password})
    });

    if (res.ok) {
      alert("Password changed successfully");
      window.location.href = "/dashboard.html";
    } else {
      const j = await res.json();
      alert(j.detail || "Error");
    }
  }
  </script>
</body>
</html>
